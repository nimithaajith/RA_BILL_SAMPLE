{% extends 'project/base.html' %}
{% load static %}
{% block navcontent %}
{% endblock %}
{% block maincontent %}


<div class="card border-primary mt-5 mx-4 p-5" style="background-color: rgba(255, 255, 255, 0.253)">                  
    <div class="row bg-light my-3 p-4">
        
        <form class="p-4 text-primary" action="{% url 'project:CreateBill' %}" enctype="multipart/form-data" id="billform" method="POST" >
            {% csrf_token %}  
            <div class="row"> 
                <h2 class="form-heading m-3  ">Bill Details </h2> 
            </div>            
           
            <div class="row my-0 p-3 bg-light">                
                
                <div>
                    <label for="projectbill" class="text-dark">For the project, is this the first bill or a subsequent one?</label>
                    <br>
                    <label>
                      <input type="radio" name="projectbill" value="first" onclick="toggleBillInput()"> First Bill
                    </label>
                    <br>
                    <label>
                      <input type="radio" name="projectbill" value="subsequent" onclick="toggleBillInput()"> Subsequent Bill
                    </label>
                </div>
                  
                <!-- Hidden input field for bill number -->
                <div id="billNumberInput" style="display: none; margin-top: 10px;">                    
                    <label for="billNumber" class="text-dark">Enter new bill number:</label>
                    <input type="number" id="billNumber" name="billNumber" min="2" placeholder="Enter bill number">
                    <div class="my-3  p-3">
                        <h2 class="m-3 text-primary">Upload Work Order BoQ with previous cumulative Quantity</h2> 
                        
                        <hr>
                        <h4 class="text-dark">Enter the column headings in your excel file .</h4>
                        <div class="row">
                            <div class="col">
                                <label for="serialno" class="mt-3 text-dark">Heading for <b>Serial Number</b> </label>
                                <input name="serialno" id="serialno" class="form-control" >

                            </div>
                            <div class="col">
                                <label for="quantity" class="mt-3 text-dark">Heading for <b>Previous Cumulative Quantity</b> </label>
                                <input name="quantity" id="quantity" class="form-control" >
                            </div>
                            <div class="col">
                                <label for="description" class="mt-3 text-dark">Heading for <b>Item Description</b> </label>
                                <input name="description" id="description" class="form-control" > 
                                
                            </div>
                            <div class="col">
                                <label for="previousbillxl" class="mt-3 text-dark">Select excel file</label>
                                <input class=" form-control" type="file" id="previousbillxl" name="previousbillxl" accept=".xls,.xlsx">       
                        
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>              
            <div class="row  my-3 pb-3 bg-light">
                <center>
                    <input type="submit" id="saveprevbill" class="btn form-btn-custom w-25" value="Submit Details">
                </center>                
            </div>   
        </form>   
    </div>  
</div>
{% endblock %}
{% block scripts %}
<script>
    function toggleBillInput() {
      
      const selectedOption = document.querySelector('input[name="projectbill"]:checked').value;
      
      const billNumberInput = document.getElementById('billNumberInput');
      if (selectedOption === "subsequent") {
        billNumberInput.style.display = "block";
      } else {
        billNumberInput.style.display = "none";
        document.getElementById('billNumber').value = ""; // Clear the input
      }
    }
    
</script>
{% endblock %}

