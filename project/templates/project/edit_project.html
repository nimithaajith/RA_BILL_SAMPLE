{% extends 'project/base.html' %}
{% load static %}
{% block navcontent %}
{% endblock %}
{% block maincontent %}
{% if project %}
<center>
    <div id="overlay">
    <div class="card-trans border-primary mt-5 m-3 p-3" style="width: 40%;background-color: rgba(255, 255, 255, 0.253);min-width: 300px;">
         
        <div class="card-header bg-dark">
            <h2 class="m-3 text-primary">Edit Project Details</h2> 
        </div>
        <div class="card-body bg-light border border-primary">        
        <form id="projectform" action="{% url 'project:EditProject' %}" method="post" >
            {% csrf_token %}            
 
            <div class="my-3 p-2 shadow">
                <label for="owner" class="w-25">Project Owner/Client </label>
                <input type="hidden" id="ownerId" name="ownerId" value="{{project.owner.id}}" />
                <input class="form-control" type="text" id="owner" name="owner" value="{{project.owner.owner_name}}" autocomplete="off" />              
                
                <button type="button" class="btn-custom" onclick="AddNewOwnerForm()">Add project owner or client</button>
                
            </div>
            <div class="my-3 p-2 shadow">
                <label for="company">Project Contractor/Company </label>
                <input type="hidden" id="companyId" name="companyId" value="{{project.company.id}}"  />
                <input class="form-control" type="text" id="company" name="company" autocomplete="off" value="{{project.company.company_name}}"/>                
                <p class="mt-2">Not in the list, Click here to <button type="button" class="btn-custom" onclick="AddNewCompanyForm()">Add company</button></p>
            </div>
            
            <div class="my-3 p-2 shadow">
                <!-- <input type="text" id="consultant" name="consultant" class="form-control" placeholder="Enter consultant name" required> -->
                <label class="w-25" for="consultant">Project Consultant</label>
                <select class="form-control" name="consultant" id="consultant" class="form-control" required>
                    <option value="{{project.consultant.id}}">{{project.consultant.consultant_name}}</option>                             
                </select>
                <p class="mt-2" >Not in the list, Click here to <button type="button" class="btn-custom" onclick="AddNewConsultantForm()">Add consultant</button></p>
            </div>
            
            
            <div class="my-3">
                <label class="w-25" for="name">Project name</label>
                <input type="text" class="form-control" name="name" id="name" value="{{project.project_name}}" required> 
            </div>
            <div class="my-3">
                <label class="w-25" for="location">Project Address </label>
                <input type="text" name="location" value="{{project.location}}" class="form-control" required>
            </div>                     
            <div class="my-3">
                <label class="w-25" for="otherdetails">Remarks(if any) </label>
                <input type="text" name="otherdetails" value="{{project.other_details}}" class="form-control">
            </div>   
            <input type="submit" class="btn form-btn-custom m-2" value="Save Project Details">
        </form>    
    </div>
    </div>
    
</center>
{% endif %}
<div id="suggestionsContainer" class="suggestions-container" style="display: none;"></div>
<div id="addOwnerContainer" class="suggestions-container" style="display: none;">
    <div class="suggestion-header">                                
        <button type="button" class="close-btn" onclick="closeOwnerForm()">X</button>
    </div>
    <h3>Add New Owner</h3>
    <hr>
    <div class="m-2">
        <label class="w-25" for="ownercompanyname">Name </label>
        <input class="w-50" id="ownercompanyname" type="text" name="ownercompanyname"> 
    </div>
    <div class="m-2 mb-0 pb-0">
        <label class="w-25" for="owneremailid">Email </label>
        <input class="w-50" type="text" name="owneremailid" id="owneremailid">         
    </div>
    <p class="mt-0 pt-0"><small style="font-size: 15px;font-weight: bold;color: orangered;">*Enter valid email id</small></p>
    
    <div class="m-2">
        <label class="w-25"> Address </label>
        <input class="w-50" type="text" id="owneraddress" name="owneraddress">
    </div>
    <div class="m-2">
        <label class="w-25" for="ownerphone">Phone Number</label>
        <select class="w-25" id="ownercountrycode" name="ownercountrycode" required>
            <option value="+91" selected>India (+91)</option>
            <option value="+1">USA (+1)</option>
            <option value="+44">UK (+44)</option>                        
            <option value="+61">Australia (+61)</option>
            <option value="+81">Japan (+81)</option>                    
        </select>
        <input class="w-25" type="tel" id="ownerphone" name="ownerphone" placeholder="Enter phone number" required/>
    </div> 
    <button type="button" class="form-btn-custom" onclick="CreateOwner()"> + Add</button>            
</div>
<div id="addCompanyContainer" class="suggestions-container" style="display: none;">
    <div class="suggestion-header">                                
        <button type="button" class="close-btn" onclick="closeCompanyForm()">X</button>
    </div>
    <h3>Add New Company</h3>
    <hr>
    <div class="m-2">
        <label class="w-25" for="contractorcompanyname">Name </label>
        <input class="w-50" id="contractorcompanyname" type="text" name="contractorcompanyname"> 
    </div>
    <div class="m-2 mb-0 pb-0">
        <label class="w-25" for="companyemailid">Email </label>
        <input class="w-50" type="text" name="companyemailid" id="companyemailid">         
    </div>
    <p class="mt-0 pt-0"><small style="font-size: 15px;font-weight: bold;color: orangered;">*Enter valid email id</small></p>
    
    <div class="m-2">
        <label class="w-25"> Address </label>
        <input class="w-50" type="text" id="companyaddress" name="companyaddress">
    </div>
    <div class="m-2">
        <label class="w-25" for="companyphone">Phone Number</label>
        <select class="w-25" id="companycountrycode" name="companycountrycode" required>
            <option value="+91" selected>India (+91)</option>
            <option value="+1">USA (+1)</option>
            <option value="+44">UK (+44)</option>                        
            <option value="+61">Australia (+61)</option>
            <option value="+81">Japan (+81)</option>                    
        </select>
        <input class="w-25" type="tel" id="companyphone" name="companyphone" placeholder="Enter phone number" required/>
    </div> 
    <button type="button" class="form-btn-custom" onclick="CreateCompany()"> + Add</button>
</div>
<div id="addConsultantContainer" class="suggestions-container" style="display: none;">
    <div class="suggestion-header">                                
        <button type="button" class="close-btn" onclick="closeConsultantForm()">X</button>
    </div>
    <h3>Add New Consultant</h3>
    <hr>
    <div class="m-2">
        <label class="w-25" for="consultantcompanyname">Name </label>
        <input class="w-50" id="consultantcompanyname" type="text" name="consultantcompanyname"> 
    </div>
    <div class="m-2 mb-0 pb-0">
        <label class="w-25" for="consultantemailid">Email </label>
        <input class="w-50" type="text" name="consultantemailid" id="consultantemailid">         
    </div>
    <p class="mt-0 pt-0"><small style="font-size: 15px;font-weight: bold;color: orangered;">*Enter valid email id</small></p>
    
    <div class="m-2">
        <label class="w-25"> Address </label>
        <input class="w-50" type="text" id="consultantaddress" name="consultantaddress">
    </div>
    <div class="m-2">
        <label class="w-25" for="consultantphone">Phone Number</label>
        <select class="w-25" id="consultantcountrycode" name="consultantcountrycode" required>
            <option value="+91" selected>India (+91)</option>
            <option value="+1">USA (+1)</option>
            <option value="+44">UK (+44)</option>                        
            <option value="+61">Australia (+61)</option>
            <option value="+81">Japan (+81)</option>                    
        </select>
        <input class="w-25" type="tel" id="consultantphone" name="consultantphone" placeholder="Enter phone number" required/>
    </div> 
    <button type="button" class="form-btn-custom" onclick="CreateConsultant()"> + Add</button>
</div>

{% endblock %}

{% block scripts %}
    {{ block.super }} 

    <script>
        var csrfToken = '{{ csrf_token }}'; 
        var ajaxurl_getowners="{% url 'project:AjaxGetOwners' %}";
        var ajaxurl_getcompanies="{% url 'project:AjaxGetCompanies' %}";
        var ajaxurl_getconsultants="{% url 'project:AjaxGetConsultants' %}";
        var ajax_addconsultant="{% url 'project:AddConsultant' %}";
        var ajax_addowner="{% url 'project:AddOwner' %}";
        var ajax_addcompany="{% url 'project:AddCompany' %}";
        const emailUrl = "{% url 'accounts:EmailExists' %}";
    </script>
    <script src="{% static 'project/js/dashboard.js' %}"></script>     
{% endblock %}
